	/* class Comet **/ 
	var Comet = $.inherit(/** @lends Comet# */{

		/** 
		*		@constructs
		*		@param {object} options An object containing the parameters
		*		@param {function} call_back Function that will be called after relevant data is available 
		*/
  	__constructor : function (data_url) {
			this.timestamp = 0;
			this.url = data_url;  
			this.noerror = true;
			this.nameFile = 'myfile';
	},
	
	timestamp : 0,
	url : '',  
	noerror : true,
	nameFile : 'myfile',
	
	/**
	*/
  connect : function() {
    var self = this;

    $.ajax({
      type : 'get',
      url : this.url,
      dataType : 'json', 
      data : {'timestamp' : self.timestamp},
      success : function(response) {
        self.timestamp = response.timestamp;
        self.handleResponse(response);
        self.noerror = true;          
      },
      complete : function(response) {
        // send a new ajax request when this request is finished
        if (!self.noerror) {
          // if a connection problem occurs, try to reconnect each 5 seconds
          setTimeout(function(){ comet.connect(); }, 5000);           
        }else {
          // persistent connection
          self.connect(); 
        }

        self.noerror = false; 
      }
    });
  },

	/**
	*/
  disconnect : function() {},

	/**
	*/
  handleResponse : function(response) {
    $('#content').append('<div>' + response.msg + '</div>');
  },

	/**
	*/
  doRequest : function(request) {
      $.ajax({
        type : 'get',
        url : this.url,
        data : {'msg' : request, 'nameFile' : comet.nameFile}
      });
  }

}\\ end class
